!function(e){function t(r){if(i[r])return i[r].exports;var a=i[r]={exports:{},id:r,loaded:!1};return e[r].call(a.exports,a,a.exports,t),a.loaded=!0,a.exports}var i={};return t.m=e,t.c=i,t.p="",t(0)}([function(e,t,i){!function(){if(!AFRAME)return void console.error("Component attempted to register before AFRAME was available.");var e={stereo:i(1).stereo_component,stereocam:i(1).stereocam_component};Object.keys(e).forEach(function(t){AFRAME.aframeCore?AFRAME.aframeCore.registerComponent(t,e[t]):AFRAME.registerComponent(t,e[t])})}()},function(e,t){e.exports={stereo_component:{schema:{eye:{type:"string",default:"left"},mode:{type:"string",default:"full"},split:{type:"string",default:"horizontal"},playOnClick:{type:"boolean",default:!0}},init:function(){if(null!==this.el.getAttribute("material")&&"src"in this.el.getAttribute("material")&&""!==this.el.getAttribute("material").src){this.el.getAttribute("material").src}var e=this.el.object3D.children[0],t=[THREE.SphereGeometry,THREE.BufferGeometry],i=t.some(function(t){return e.geometry instanceof t});if(i){if("half"===this.data.mode)var r=this.el.getAttribute("geometry"),a=new THREE.SphereGeometry(r.radius||100,r.segmentsWidth||64,r.segmentsHeight||64,Math.PI/2,Math.PI,0,Math.PI);else var r=this.el.getAttribute("geometry"),a=new THREE.SphereGeometry(r.radius||100,r.segmentsWidth||64,r.segmentsHeight||64);e.rotation.y=Math.PI/2;for(var o="horizontal"===this.data.split?"y":"x",n="left"===this.data.eye?"y"===o?{x:0,y:0}:{x:0,y:.5}:"y"===o?{x:.5,y:0}:{x:0,y:0},s="y"===o?{x:.5,y:1}:{x:1,y:.5},l=a.attributes.uv,c=0;c<l.count;c++){var h=l.getX(c)*s.x+n.x,y=l.getY(c)*s.y+n.y;l.setXY(c,h,y)}l.needsUpdate=!0,this.originalGeometry=e.geometry,e.geometry=a,this.videoEl=this.el.object3D.children[0].material.map.image;var d=this;d.videoEl.muted=!0,d.videoEl.play()}},remove:function(){var e=this.el.object3D.children[0];e.geometry.dispose(),this.originalGeometry&&(e.geometry=this.originalGeometry)},update:function(e){var t=this.el.object3D.children[0],i=this.data;"both"===i.eye?t.layers.set(0):t.layers.set("left"===i.eye?1:2)},tick:function(e){if(this.data.playOnClick&&"undefined"!=typeof this.el.sceneEl.canvas){this.videoEl=this.el.object3D.children[0].material.map.image;var t=this;this.el.sceneEl.canvas.onclick=function(){t.videoEl.play()},this.video_click_event_added=!0}}},stereocam_component:{schema:{eye:{type:"string",default:"left"}},init:function(){this.layer_changed=!1},tick:function(e){var t=this.data;if(!this.layer_changed){var i=[];this.el.object3D.children.forEach(function(e,t,r){i[t]=e.type});var r=i.indexOf("PerspectiveCamera"),a=this.el.object3D.children[r];"both"===t.eye?(a.layers.enable(1),a.layers.enable(2)):a.layers.enable("left"===t.eye?1:2),this.layer_changed=!0}}}}}]);